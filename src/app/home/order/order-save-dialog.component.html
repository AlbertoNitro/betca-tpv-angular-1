<h3 mat-dialog-title>{{mode}} Order</h3>

<mat-dialog-content>
  <mat-form-field>
    <mat-label>Select a provider</mat-label>
    <mat-select placeholder="State" #pro (selectionChange)="getArticlesByProvider($event.value)">
      <mat-option *ngFor="let provee of providers" [value]="provee.id">
        {{ provee.company }}
      </mat-option>
    </mat-select>
  </mat-form-field>
  <mat-form-field>
    <mat-label>Select article</mat-label>
    <mat-select placeholder="State" (selectionChange)="addArticleOrderList($event.value, pro.value)">
      <mat-option *ngFor="let article of orderArticle" [value]="article.code">
        {{ article.description}}
      </mat-option>
    </mat-select>
  </mat-form-field>
</mat-dialog-content>

<mat-card>
  <mat-card-title>
    <mat-icon color="primary">shopping_cart</mat-icon>
    Articles
  </mat-card-title>
  <mat-card-content>
    <mat-table [dataSource]="dataTAbleArticles" class="mat-elevation-z8">
      <ng-container matColumnDef="id">
        <mat-header-cell *matHeaderCellDef fxFlex="5%">{{indexShoppingCart()}} #</mat-header-cell>
        <mat-cell *matCellDef="let i = index" fxFlex="5%">{{i + 1}}</mat-cell>
      </ng-container>

      <ng-container matColumnDef="description">
        <mat-header-cell *matHeaderCellDef fxFlex="28%"> Description</mat-header-cell>
        <mat-cell *matCellDef="let item" fxFlex="28%"> {{item.description}}</mat-cell>
      </ng-container>

      <ng-container matColumnDef="amount">
        <mat-header-cell *matHeaderCellDef fxFlex="20%"> Amount</mat-header-cell>
        <mat-cell *matCellDef="let item" fxFlex="20%">
          <button (click)="decreaseAmount(item)" color="accent" mat-icon-button>
            <mat-icon>remove_circle_outline</mat-icon>
          </button>
          {{item.amount}}
          <button (click)="incrementAmount(item)" color="accent" mat-icon-button>
            <mat-icon>add_circle_outline</mat-icon>
          </button>
        </mat-cell>
      </ng-container>

      <ng-container matColumnDef="price">
        <mat-header-cell *matHeaderCellDef fxFlex="11%"> Price</mat-header-cell>
        <mat-cell *matCellDef="let item" fxFlex="11%">
          <input [value]="priceLabel(item)" matInput readonly type="number"/>
        </mat-cell>
      </ng-container>

      <ng-container matColumnDef="actions">

        <mat-header-cell *matHeaderCellDef fxFlex="15%">
          <button mat-button mat-icon-button matSuffix>
            <mat-icon color="primary">autorenew</mat-icon>
          </button>
        </mat-header-cell>

        <mat-cell *matCellDef="let item" fxFlex="15%">
          <button (click)="delete(item)" mat-button mat-icon-button matSuffix>
            <mat-icon color="warn">close</mat-icon>
          </button>
        </mat-cell>
      </ng-container>

      <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
      <mat-row *matRowDef="let item; columns: displayedColumns;"></mat-row>
    </mat-table>
  </mat-card-content>
</mat-card>

<mat-dialog-actions>
  <button mat-button mat-dialog-close (click)="create()">Create order</button>
</mat-dialog-actions>
